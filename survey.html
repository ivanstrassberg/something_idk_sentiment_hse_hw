<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Customer Survey</title>
</head>

<body>

    <h2>Customer Feedback</h2>

    <label>Rate your experience (1-5)</label>
    <input type="number" id="rating" min="1" max="5"><br><br>

    <label>Feedback</label><br>
    <textarea id="feedback" rows="4"></textarea><br><br>

    <button onclick="submitSurvey()">Submit</button>

    <script>

        const LS_GAS = "gas_url";

        async function submitSurvey() {

            const gasUrl = localStorage.getItem(LS_GAS);
            const userId = localStorage.getItem("user_id");

            const form = new URLSearchParams();
            form.set("event_id", "event_" + crypto.randomUUID());
            form.set("user_id", userId);
            form.set("event_type", "SURVEY_SUBMITTED");
            form.set("survey_submitted", "YES");
            form.set("survey_rating", document.getElementById("rating").value);
            form.set("survey_feedback", document.getElementById("feedback").value);

            await fetch(gasUrl, { method: "POST", body: form });

            alert("Thank you!");
        }

    </script>

</body>

</html>